pre-commit:
  parallel: true
  scripts:
    branch-name-check.sh:
      runner: bash
      script: |
        #!/bin/bash
        set -euo pipefail

        BRANCH=$(git rev-parse --abbrev-ref HEAD)

        echo "ğŸ” Current branch: $BRANCH"

        if ! [[ "$BRANCH" =~ ^(feature|fix|chore|build|style|docs)/.+$ ]]; then
          echo "âŒ Invalid branch name: '$BRANCH'"
          echo "ğŸ’¡ Use: feature/name, fix/bug-name, etc."
          exit 1
        fi

        echo "âœ… Branch name OK."

  commands:
    lint:
      run: flutter analyze

pre-push:
  parallel: true
  commands:
    analyze:
      run: flutter analyze
    test:
      run: flutter test

commit-msg:
  scripts:
    commit-msg-check.sh:
      runner: bash
      script: |
        #!/bin/bash
        MSG=$(head -n1 "$1")
        if ! [[ "$MSG" =~ ^(feat|fix|chore|refactor|test|docs|style|ci|perf|build|revert)(\(.+\))?:\ .+ ]]; then
          echo "âŒ Invalid commit message: '$MSG'"
          echo "ğŸ’¡ Use Conventional Commits (e.g., feat: add login form)"
          exit 1
        fi
        echo "âœ… Commit message OK."
